# Vib SNS å®Œå…¨ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯ã€Vib SNSã‚¢ãƒ—ãƒªã®ã™ã¹ã¦ã®æƒ…å ±ã‚’åŒ…æ‹¬çš„ã«ã¾ã¨ã‚ãŸã‚‚ã®ã§ã™ã€‚
NotebookLMãªã©ã®AIãƒ„ãƒ¼ãƒ«ã«èª­ã¿è¾¼ã¾ã›ã‚‹ã“ã¨ã§ã€ã‚¢ãƒ—ãƒªã«ã¤ã„ã¦ã®è³ªå•ã«å›ç­”ã§ãã‚‹ãƒŠãƒ¬ãƒƒã‚¸ãƒ™ãƒ¼ã‚¹ã¨ã—ã¦ä½¿ç”¨ã§ãã¾ã™ã€‚

---

## 1. ã‚¢ãƒ—ãƒªæ¦‚è¦

### ã‚¢ãƒ—ãƒªå
**Vib SNSï¼ˆãƒ“ãƒ– ã‚¨ã‚¹ã‚¨ãƒŒã‚¨ã‚¹ï¼‰**

### ã‚³ãƒ³ã‚»ãƒ—ãƒˆ
ãƒ‹ãƒ³ãƒ†ãƒ³ãƒ‰ãƒ¼3DSã®ã€Œã™ã‚Œã¡ãŒã„é€šä¿¡ã€ã«ç€æƒ³ã‚’å¾—ãŸã€ç¾ä»£ã®ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³å‘ã‘ã‚½ãƒ¼ã‚·ãƒ£ãƒ«ã‚¢ãƒ—ãƒªã§ã™ã€‚
è¡—ã‚’æ­©ã„ã¦ã„ã‚‹ã ã‘ã§è¿‘ãã«ã„ã‚‹äººã¨ç¹‹ãŒã‚Œã‚‹ä½“é¨“ã‚’æä¾›ã—ã¾ã™ã€‚

### ä¸»ãªç‰¹å¾´
- GPSã¨Bluetooth Low Energyï¼ˆBLEï¼‰ã‚’ä½¿ç”¨ã—ãŸè¿‘æ¥æ¤œå‡º
- ã™ã‚Œã¡ãŒã£ãŸäººã®ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«è¡¨ç¤º
- ã„ã„ã­ãƒ»ãƒ•ã‚©ãƒ­ãƒ¼æ©Ÿèƒ½
- ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ï¼ˆæŠ•ç¨¿ãƒ»è¿”ä¿¡æ©Ÿèƒ½ï¼‰
- ãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼ˆDMï¼‰
- ã‚¨ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³ãƒãƒƒãƒ—ï¼ˆæ„Ÿæƒ…ã‚’åœ°å›³ä¸Šã«æŠ•ç¨¿ï¼‰
- é€šçŸ¥ã‚·ã‚¹ãƒ†ãƒ 
- QRã‚³ãƒ¼ãƒ‰ã§ã®ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«å…±æœ‰

### ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ 
- Android
- iOS
- Web

---

## 2. æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
| æŠ€è¡“ | ç”¨é€” |
|------|------|
| Flutter 3.x | ã‚¯ãƒ­ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ UIé–‹ç™º |
| Material 3 | ãƒ‡ã‚¶ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ  |
| Provider | çŠ¶æ…‹ç®¡ç†ãƒ‘ã‚¿ãƒ¼ãƒ³ |
| Google Fonts | ã‚«ã‚¹ã‚¿ãƒ ãƒ•ã‚©ãƒ³ãƒˆï¼ˆInter, Roboto, Outfitï¼‰ |

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ï¼ˆFirebaseï¼‰
| æŠ€è¡“ | ç”¨é€” |
|------|------|
| Firebase Auth | èªè¨¼ï¼ˆåŒ¿åèªè¨¼ã€Googleèªè¨¼ï¼‰ |
| Cloud Firestore | ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ |
| Firebase Storage | ç”»åƒã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ |
| Cloud Functions | ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ãƒ­ã‚¸ãƒƒã‚¯ |
| Firebase Hosting | Webã‚¢ãƒ—ãƒªãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚° |

### ãã®ä»–ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸
| ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ | ç”¨é€” |
|------------|------|
| geolocator | GPSä½ç½®æƒ…å ±å–å¾— |
| flutter_blue_plus | BLEã‚¹ã‚­ãƒ£ãƒ³ |
| flutter_ble_peripheral | BLEã‚¢ãƒ‰ãƒã‚¿ã‚¤ã‚º |
| flutter_map | åœ°å›³è¡¨ç¤º |
| latlong2 | ç·¯åº¦çµŒåº¦è¨ˆç®— |
| image_picker | ç”»åƒé¸æŠ |
| qr_flutter | QRã‚³ãƒ¼ãƒ‰ç”Ÿæˆ |
| vibration | ãƒã‚¤ãƒ–ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³åˆ¶å¾¡ |
| shared_preferences | ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ |
| permission_handler | æ¨©é™ç®¡ç† |

---

## 3. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ 

```
vib_sns/
â”œâ”€â”€ lib/                          # Dartã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰
â”‚   â”œâ”€â”€ main.dart                 # ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ
â”‚   â”œâ”€â”€ firebase_options.dart     # Firebaseè¨­å®š
â”‚   â”œâ”€â”€ data/                     # ãƒ‡ãƒ¼ã‚¿ãƒ¬ã‚¤ãƒ¤ãƒ¼
â”‚   â”œâ”€â”€ models/                   # ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ« (7ãƒ•ã‚¡ã‚¤ãƒ«)
â”‚   â”‚   â”œâ”€â”€ profile.dart          # ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«
â”‚   â”‚   â”œâ”€â”€ encounter.dart        # ã™ã‚Œã¡ãŒã„è¨˜éŒ²
â”‚   â”‚   â”œâ”€â”€ timeline_post.dart    # ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³æŠ•ç¨¿
â”‚   â”‚   â”œâ”€â”€ conversation.dart     # DMä¼šè©±
â”‚   â”‚   â”œâ”€â”€ direct_message.dart   # DMãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
â”‚   â”‚   â”œâ”€â”€ app_notification.dart # é€šçŸ¥
â”‚   â”‚   â””â”€â”€ emotion_post.dart     # ã‚¨ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³ãƒãƒƒãƒ—æŠ•ç¨¿
â”‚   â”œâ”€â”€ screens/                  # ç”»é¢ (18ãƒ•ã‚¡ã‚¤ãƒ«)
â”‚   â”‚   â”œâ”€â”€ home_shell.dart       # ãƒ¡ã‚¤ãƒ³ç”»é¢ï¼ˆã‚¿ãƒ–ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰
â”‚   â”‚   â”œâ”€â”€ encounter_list_screen.dart    # ã™ã‚Œã¡ãŒã„ä¸€è¦§
â”‚   â”‚   â”œâ”€â”€ encounter_detail_screen.dart  # ã™ã‚Œã¡ãŒã„è©³ç´°
â”‚   â”‚   â”œâ”€â”€ profile_view_screen.dart      # ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«è©³ç´°
â”‚   â”‚   â”œâ”€â”€ profile_edit_screen.dart      # ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç·¨é›†
â”‚   â”‚   â”œâ”€â”€ chat_screen.dart              # ãƒãƒ£ãƒƒãƒˆç”»é¢
â”‚   â”‚   â”œâ”€â”€ conversation_list_screen.dart # ä¼šè©±ä¸€è¦§
â”‚   â”‚   â”œâ”€â”€ notifications_screen.dart     # é€šçŸ¥ä¸€è¦§
â”‚   â”‚   â”œâ”€â”€ post_detail_screen.dart       # æŠ•ç¨¿è©³ç´°
â”‚   â”‚   â”œâ”€â”€ settings_screen.dart          # è¨­å®š
â”‚   â”‚   â”œâ”€â”€ welcome_screen.dart           # ã‚¦ã‚§ãƒ«ã‚«ãƒ ç”»é¢
â”‚   â”‚   â”œâ”€â”€ register_account_screen.dart  # ã‚¢ã‚«ã‚¦ãƒ³ãƒˆç™»éŒ²
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ services/                 # ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰é€šä¿¡ (10ãƒ•ã‚¡ã‚¤ãƒ«)
â”‚   â”‚   â”œâ”€â”€ streetpass_service.dart       # ã™ã‚Œã¡ãŒã„æŠ½è±¡ã‚¯ãƒ©ã‚¹
â”‚   â”‚   â”œâ”€â”€ firestore_streetpass_service.dart  # Firestoreå®Ÿè£…
â”‚   â”‚   â”œâ”€â”€ mock_streetpass_service.dart       # ãƒ¢ãƒƒã‚¯å®Ÿè£…
â”‚   â”‚   â”œâ”€â”€ profile_interaction_service.dart   # ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«æ“ä½œæŠ½è±¡ã‚¯ãƒ©ã‚¹
â”‚   â”‚   â”œâ”€â”€ firestore_profile_interaction_service.dart # Firestoreå®Ÿè£…
â”‚   â”‚   â”œâ”€â”€ mock_profile_interaction_service.dart      # ãƒ¢ãƒƒã‚¯å®Ÿè£…
â”‚   â”‚   â”œâ”€â”€ ble_proximity_scanner.dart          # BLEæŠ½è±¡ã‚¯ãƒ©ã‚¹
â”‚   â”‚   â”œâ”€â”€ ble_proximity_scanner_impl.dart     # BLEå®Ÿè£…
â”‚   â”‚   â”œâ”€â”€ mock_ble_proximity_scanner.dart     # ãƒ¢ãƒƒã‚¯å®Ÿè£…
â”‚   â”‚   â””â”€â”€ firestore_dm_service.dart           # DM Firestoreå®Ÿè£…
â”‚   â”œâ”€â”€ state/                    # çŠ¶æ…‹ç®¡ç† (7ãƒ•ã‚¡ã‚¤ãƒ«)
â”‚   â”‚   â”œâ”€â”€ encounter_manager.dart      # ã™ã‚Œã¡ãŒã„çŠ¶æ…‹ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ timeline_manager.dart       # ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³çŠ¶æ…‹ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ notification_manager.dart   # é€šçŸ¥çŠ¶æ…‹ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ emotion_map_manager.dart    # ã‚¨ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³ãƒãƒƒãƒ—ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ profile_controller.dart     # ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«åˆ¶å¾¡
â”‚   â”‚   â”œâ”€â”€ local_profile_loader.dart   # ãƒ­ãƒ¼ã‚«ãƒ«ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«èª­ã¿è¾¼ã¿
â”‚   â”‚   â””â”€â”€ runtime_config.dart         # å®Ÿè¡Œæ™‚è¨­å®š
â”‚   â”œâ”€â”€ utils/                    # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ (5ãƒ•ã‚¡ã‚¤ãƒ«)
â”‚   â””â”€â”€ widgets/                  # å†åˆ©ç”¨å¯èƒ½ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆ (10ãƒ•ã‚¡ã‚¤ãƒ«)
â”‚       â”œâ”€â”€ emotion_map.dart      # ã‚¨ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³ãƒãƒƒãƒ—ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆ
â”‚       â”œâ”€â”€ like_button.dart      # ã„ã„ã­ãƒœã‚¿ãƒ³
â”‚       â”œâ”€â”€ profile_avatar.dart   # ã‚¢ãƒã‚¿ãƒ¼è¡¨ç¤º
â”‚       â””â”€â”€ ...
â”œâ”€â”€ functions/                    # Cloud Functions (Node.js)
â”‚   â”œâ”€â”€ index.js                  # é–¢æ•°å®šç¾©
â”‚   â””â”€â”€ package.json              # ä¾å­˜é–¢ä¿‚
â”œâ”€â”€ firestore.rules               # Firestoreã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ«ãƒ¼ãƒ«
â”œâ”€â”€ storage.rules                 # Storageã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ«ãƒ¼ãƒ«
â”œâ”€â”€ firebase.json                 # Firebaseè¨­å®š
â”œâ”€â”€ pubspec.yaml                  # Flutterä¾å­˜é–¢ä¿‚
â”œâ”€â”€ android/                      # Androidå›ºæœ‰è¨­å®š
â”œâ”€â”€ web/                          # Webå›ºæœ‰è¨­å®š
â”œâ”€â”€ dashboard/                    # ç®¡ç†ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
â””â”€â”€ assets/                       # é™çš„ã‚¢ã‚»ãƒƒãƒˆ
```

---

## 4. ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«

### 4.1 Profileï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ï¼‰

ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®åŸºæœ¬æƒ…å ±ã‚’ç®¡ç†ã™ã‚‹ãƒ¢ãƒ‡ãƒ«ã§ã™ã€‚

```dart
class Profile {
  final String id;              // ãƒ‡ãƒã‚¤ã‚¹IDï¼ˆãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã®ä¸€æ„è­˜åˆ¥å­ï¼‰
  final String beaconId;        // BLEãƒ“ãƒ¼ã‚³ãƒ³ID
  final String? username;       // ãƒ¦ãƒ¼ã‚¶ãƒ¼IDï¼ˆ@ã§å§‹ã¾ã‚‹ã€3-20æ–‡å­—ã€è‹±æ•°å­—ã¨ã‚¢ãƒ³ãƒ€ãƒ¼ã‚¹ã‚³ã‚¢ï¼‰
  final String displayName;     // è¡¨ç¤ºå
  final String bio;             // è‡ªå·±ç´¹ä»‹
  final String homeTown;        // å‡ºèº«åœ°
  final List<String> favoriteGames;  // ãŠæ°—ã«å…¥ã‚Šãƒãƒƒã‚·ãƒ¥ã‚¿ã‚°ï¼ˆæœ€å¤§10å€‹ã€32æ–‡å­—ä»¥å†…ï¼‰
  final Color avatarColor;      // ã‚¢ãƒã‚¿ãƒ¼èƒŒæ™¯è‰²
  final String? avatarImageBase64;  // ã‚¢ãƒã‚¿ãƒ¼ç”»åƒï¼ˆBase64ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ï¼‰
  bool following;               // ãƒ•ã‚©ãƒ­ãƒ¼ä¸­ã‹ã©ã†ã‹
  int receivedLikes;            // å—ã‘å–ã£ãŸã„ã„ã­æ•°
  int followersCount;           // ãƒ•ã‚©ãƒ­ãƒ¯ãƒ¼æ•°
  int followingCount;           // ãƒ•ã‚©ãƒ­ãƒ¼ä¸­ã®æ•°
}
```

**Firestoreã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³**: `profiles/{profileId}`

**ä¸»ãªæ©Ÿèƒ½**:
- `toggleFollow()`: ãƒ•ã‚©ãƒ­ãƒ¼çŠ¶æ…‹ã‚’åˆ‡ã‚Šæ›¿ãˆ
- `like()`: ã„ã„ã­ã‚’è¿½åŠ 
- `copyWith()`: ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã®ã‚³ãƒ”ãƒ¼ã‚’ä½œæˆ
- `toMap()` / `fromMap()`: Firestoreå¤‰æ›
- `validateUsername()`: ãƒ¦ãƒ¼ã‚¶ãƒ¼åã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
- `normalizeUsername()`: ãƒ¦ãƒ¼ã‚¶ãƒ¼åã®æ­£è¦åŒ–
- `sanitizeHashtags()`: ãƒãƒƒã‚·ãƒ¥ã‚¿ã‚°ã®ã‚µãƒ‹ã‚¿ã‚¤ã‚º

**ã‚µãƒ–ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³**:
- `profiles/{profileId}/followers/{followerId}`: ãƒ•ã‚©ãƒ­ãƒ¯ãƒ¼ä¸€è¦§
- `profiles/{profileId}/following/{targetId}`: ãƒ•ã‚©ãƒ­ãƒ¼ä¸­ä¸€è¦§
- `profiles/{profileId}/likes/{likerId}`: ã„ã„ã­ã—ãŸäººä¸€è¦§
- `profiles/{profileId}/notifications/{notificationId}`: é€šçŸ¥

---

### 4.2 Encounterï¼ˆã™ã‚Œã¡ãŒã„è¨˜éŒ²ï¼‰

ã™ã‚Œã¡ãŒã„ã‚¤ãƒ™ãƒ³ãƒˆã‚’è¨˜éŒ²ã™ã‚‹ãƒ¢ãƒ‡ãƒ«ã§ã™ã€‚

```dart
class Encounter {
  final String id;              // ä¸€æ„è­˜åˆ¥å­
  Profile profile;              // ã™ã‚Œã¡ãŒã£ãŸç›¸æ‰‹ã®ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«
  final String beaconId;        // ç›¸æ‰‹ã®ãƒ“ãƒ¼ã‚³ãƒ³ID
  DateTime encounteredAt;       // ã™ã‚Œã¡ãŒã£ãŸæ—¥æ™‚
  String? message;              // ä¸€è¨€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
  double? gpsDistanceMeters;    // GPSè·é›¢ï¼ˆãƒ¡ãƒ¼ãƒˆãƒ«ï¼‰
  double? bleDistanceMeters;    // BLEè·é›¢ï¼ˆãƒ¡ãƒ¼ãƒˆãƒ«ï¼‰
  double? latitude;             // ç·¯åº¦
  double? longitude;            // çµŒåº¦
  bool unread;                  // æœªèª­ãƒ•ãƒ©ã‚°
  bool liked;                   // ã„ã„ã­æ¸ˆã¿ãƒ•ãƒ©ã‚°
}
```

**è¨ˆç®—ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£**:
- `displayDistance`: BLEè·é›¢ãŒã‚ã‚Œã°ãã‚Œã‚’ã€ãªã‘ã‚Œã°GPSè·é›¢ã‚’è¿”ã™
- `proximityVerified`: BLEè·é›¢ãŒè¨˜éŒ²ã•ã‚Œã¦ã„ã‚‹å ´åˆã¯true

**ä¸»ãªæ©Ÿèƒ½**:
- `markRead()`: æ—¢èª­ã«ã™ã‚‹
- `toggleLiked()`: ã„ã„ã­çŠ¶æ…‹ã‚’åˆ‡ã‚Šæ›¿ãˆ

---

### 4.3 TimelinePostï¼ˆã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³æŠ•ç¨¿ï¼‰

ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ã®æŠ•ç¨¿ã‚’ç®¡ç†ã™ã‚‹ãƒ¢ãƒ‡ãƒ«ã§ã™ã€‚

```dart
class TimelinePost {
  final String id;              // æŠ•ç¨¿ID
  final String authorId;        // æŠ•ç¨¿è€…ã®ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ID
  final String authorName;      // æŠ•ç¨¿è€…ã®è¡¨ç¤ºå
  final String? authorUsername; // æŠ•ç¨¿è€…ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼å
  final int authorColorValue;   // æŠ•ç¨¿è€…ã®ã‚¢ãƒã‚¿ãƒ¼è‰²
  final String caption;         // æŠ•ç¨¿æœ¬æ–‡
  final DateTime createdAt;     // ä½œæˆæ—¥æ™‚
  final String? imageBase64;    // ç”»åƒï¼ˆBase64ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ï¼‰
  final String? imageUrl;       // ç”»åƒURLï¼ˆFirebase Storageï¼‰
  final String? authorAvatarImageBase64;  // æŠ•ç¨¿è€…ã‚¢ãƒã‚¿ãƒ¼
  int likeCount;                // ã„ã„ã­æ•°
  bool isLiked;                 // é–²è¦§è€…ãŒã„ã„ã­æ¸ˆã¿ã‹
  int replyCount;               // è¿”ä¿¡æ•°
  final String? parentPostId;   // è¦ªæŠ•ç¨¿IDï¼ˆãƒªãƒ—ãƒ©ã‚¤ã®å ´åˆï¼‰
  final String? replyToId;      // è¿”ä¿¡å…ˆæŠ•ç¨¿ID
  final String? replyToAuthorName;  // è¿”ä¿¡å…ˆã®æŠ•ç¨¿è€…å
  final List<String> hashtags;  // ãƒãƒƒã‚·ãƒ¥ã‚¿ã‚°
  final List<String> likedBy;   // ã„ã„ã­ã—ãŸäººã®IDãƒªã‚¹ãƒˆ
}
```

**Firestoreã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³**: `timelinePosts/{postId}`

**ã‚µãƒ–ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³**: `timelinePosts/{postId}/replies/{replyId}`

**ä¸»ãªæ©Ÿèƒ½**:
- `decodeImage()`: Base64ç”»åƒã‚’ãƒ‡ã‚³ãƒ¼ãƒ‰
- `resolveAvatarImage()`: ã‚¢ãƒã‚¿ãƒ¼ç”»åƒã‚’å–å¾—
- `formattedAuthorUsername`: @ä»˜ããƒ¦ãƒ¼ã‚¶ãƒ¼åã‚’å–å¾—

---

### 4.4 Conversationï¼ˆä¼šè©±ï¼‰

DMã®ä¼šè©±ã‚’ç®¡ç†ã™ã‚‹ãƒ¢ãƒ‡ãƒ«ã§ã™ã€‚

```dart
class Conversation {
  final String id;                    // ä¼šè©±ID
  final List<String> participantIds;  // å‚åŠ è€…ã®ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«IDãƒªã‚¹ãƒˆ
  String? lastMessage;                // æœ€æ–°ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
  DateTime? lastMessageAt;            // æœ€æ–°ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æ—¥æ™‚
  Map<String, int> unreadCounts;      // ãƒ¦ãƒ¼ã‚¶ãƒ¼ã”ã¨ã®æœªèª­æ•°
  Map<String, bool> pinnedBy;         // ãƒ”ãƒ³ç•™ã‚çŠ¶æ…‹
  Map<String, bool> mutedBy;          // ãƒŸãƒ¥ãƒ¼ãƒˆçŠ¶æ…‹
}
```

**Firestoreã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³**: `conversations/{conversationId}`

**ã‚µãƒ–ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³**: `conversations/{conversationId}/messages/{messageId}`

**ä¸»ãªæ©Ÿèƒ½**:
- `getOtherParticipantId()`: ç›¸æ‰‹ã®å‚åŠ è€…IDã‚’å–å¾—
- `getUnreadCount()`: æœªèª­æ•°ã‚’å–å¾—
- `isPinnedFor()`: ãƒ”ãƒ³ç•™ã‚çŠ¶æ…‹ã‚’ç¢ºèª
- `isMutedFor()`: ãƒŸãƒ¥ãƒ¼ãƒˆçŠ¶æ…‹ã‚’ç¢ºèª

---

### 4.5 DirectMessageï¼ˆãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼‰

å€‹åˆ¥ã®DMãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ç®¡ç†ã™ã‚‹ãƒ¢ãƒ‡ãƒ«ã§ã™ã€‚

```dart
class DirectMessage {
  final String id;              // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ID
  final String senderId;        // é€ä¿¡è€…ã®ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ID
  final String content;         // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å†…å®¹
  final DateTime createdAt;     // é€ä¿¡æ—¥æ™‚
  final String? imageBase64;    // æ·»ä»˜ç”»åƒï¼ˆBase64ï¼‰
}
```

---

### 4.6 AppNotificationï¼ˆé€šçŸ¥ï¼‰

ã‚¢ãƒ—ãƒªå†…é€šçŸ¥ã‚’ç®¡ç†ã™ã‚‹ãƒ¢ãƒ‡ãƒ«ã§ã™ã€‚

```dart
enum AppNotificationType {
  encounter,      // ã™ã‚Œã¡ãŒã„é€šçŸ¥
  like,           // ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã¸ã®ã„ã„ã­
  follow,         // ãƒ•ã‚©ãƒ­ãƒ¼
  timelineLike,   // æŠ•ç¨¿ã¸ã®ã„ã„ã­
  reply,          // è¿”ä¿¡
}

class AppNotification {
  final String id;                  // é€šçŸ¥ID
  final AppNotificationType type;   // é€šçŸ¥ã‚¿ã‚¤ãƒ—
  final String title;               // ã‚¿ã‚¤ãƒˆãƒ«
  final String message;             // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
  final DateTime createdAt;         // ä½œæˆæ—¥æ™‚
  final Profile? profile;           // é–¢é€£ã™ã‚‹ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«
  final String? encounterId;        // é–¢é€£ã™ã‚‹ã™ã‚Œã¡ãŒã„ID
  final String? postId;             // é–¢é€£ã™ã‚‹æŠ•ç¨¿ID
  final String? replyId;            // é–¢é€£ã™ã‚‹ãƒªãƒ—ãƒ©ã‚¤ID
  bool read;                        // æ—¢èª­ãƒ•ãƒ©ã‚°
}
```

---

### 4.7 EmotionMapPostï¼ˆã‚¨ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³ãƒãƒƒãƒ—æŠ•ç¨¿ï¼‰

æ„Ÿæƒ…ã‚’åœ°å›³ä¸Šã«æŠ•ç¨¿ã™ã‚‹æ©Ÿèƒ½ã®ãƒ¢ãƒ‡ãƒ«ã§ã™ã€‚

```dart
enum EmotionType {
  happy,      // ã†ã‚Œã—ã„ ğŸ˜Š
  sad,        // ã‹ãªã—ã„ ğŸ˜¢
  excited,    // ãƒ¯ã‚¯ãƒ¯ã‚¯ ğŸ¤©
  calm,       // ãŠã ã‚„ã‹ ğŸ˜Œ
  surprised,  // ã³ã£ãã‚Š ğŸ˜®
  tired,      // ã¤ã‹ã‚ŒãŸ ğŸ˜´
}

class EmotionMapPost {
  final String id;              // æŠ•ç¨¿ID
  final EmotionType emotion;    // æ„Ÿæƒ…ã‚¿ã‚¤ãƒ—
  final double latitude;        // ç·¯åº¦
  final double longitude;       // çµŒåº¦
  final DateTime createdAt;     // ä½œæˆæ—¥æ™‚
  final String? message;        // ä¸€è¨€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
  final String? profileId;      // æŠ•ç¨¿è€…ã®ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ID
}
```

**Firestoreã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³**: `emotion_map_posts/{postId}`

---

## 5. ã‚µãƒ¼ãƒ“ã‚¹ãƒ¬ã‚¤ãƒ¤ãƒ¼

### 5.1 StreetPassServiceï¼ˆã™ã‚Œã¡ãŒã„ã‚µãƒ¼ãƒ“ã‚¹ï¼‰

è¿‘ãã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’æ¤œå‡ºã™ã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã®æŠ½è±¡ã‚¯ãƒ©ã‚¹ã§ã™ã€‚

```dart
abstract class StreetPassService {
  Stream<StreetPassEncounterData> get encounterStream;
  Future<void> start(Profile localProfile);
  Future<void> stop();
  Future<void> dispose();
}
```

**å®Ÿè£…ã‚¯ãƒ©ã‚¹**:
- `FirestoreStreetPassService`: Firestoreã‚’ä½¿ç”¨ã—ãŸæœ¬ç•ªå®Ÿè£…
- `MockStreetPassService`: ãƒ†ã‚¹ãƒˆç”¨ãƒ¢ãƒƒã‚¯å®Ÿè£…

**StreetPassEncounterData**:
```dart
class StreetPassEncounterData {
  final String remoteId;        // ç›¸æ‰‹ã®ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ID
  final Profile profile;        // ç›¸æ‰‹ã®ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«
  final String beaconId;        // ãƒ“ãƒ¼ã‚³ãƒ³ID
  final DateTime encounteredAt; // ã™ã‚Œã¡ãŒã„æ—¥æ™‚
  final double gpsDistanceMeters;  // GPSè·é›¢
  final String? message;        // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
  final double? latitude;       // ç·¯åº¦
  final double? longitude;      // çµŒåº¦
}
```

---

### 5.2 ProfileInteractionServiceï¼ˆãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«æ“ä½œã‚µãƒ¼ãƒ“ã‚¹ï¼‰

ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«é–¢é€£ã®æ“ä½œã‚’è¡Œã†ã‚µãƒ¼ãƒ“ã‚¹ã®æŠ½è±¡ã‚¯ãƒ©ã‚¹ã§ã™ã€‚

```dart
abstract class ProfileInteractionService {
  Future<void> bootstrapProfile(Profile profile);
  Stream<ProfileInteractionSnapshot> watchProfile({required String targetId, required String viewerId});
  Stream<List<ProfileFollowSnapshot>> watchFollowers({required String targetId, required String viewerId});
  Stream<List<ProfileFollowSnapshot>> watchFollowing({required String targetId, required String viewerId});
  Stream<List<ProfileLikeSnapshot>> watchLikes({required String targetId, required String viewerId});
  Future<void> setLike({required String targetId, required Profile viewerProfile, required bool like});
  Future<void> setFollow({required String targetId, required String viewerId, required bool follow});
  Future<List<ProfileFollowSnapshot>> loadFollowersOnce({required String targetId, required String viewerId});
  Future<List<ProfileFollowSnapshot>> loadFollowingOnce({required String targetId, required String viewerId});
  Future<Profile?> loadProfile(String profileId);
  Future<bool> isUsernameTaken(String username, {String? excludeProfileId});
  Future<void> dispose();
}
```

**å®Ÿè£…ã‚¯ãƒ©ã‚¹**:
- `FirestoreProfileInteractionService`: Firestoreå®Ÿè£…
- `MockProfileInteractionService`: ãƒ¢ãƒƒã‚¯å®Ÿè£…

---

### 5.3 BleProximityScannerï¼ˆBLEè¿‘æ¥ã‚¹ã‚­ãƒ£ãƒŠãƒ¼ï¼‰

Bluetooth Low Energyã‚’ä½¿ç”¨ã—ãŸè¿‘æ¥æ¤œå‡ºã‚µãƒ¼ãƒ“ã‚¹ã§ã™ã€‚

**BleProximityHit**:
```dart
class BleProximityHit {
  final String beaconId;        // ãƒ“ãƒ¼ã‚³ãƒ³ID
  final double? estimatedDistance;  // æ¨å®šè·é›¢
  final int? rssi;              // ä¿¡å·å¼·åº¦
}
```

**å®Ÿè£…ã‚¯ãƒ©ã‚¹**:
- `BleProximityScannerImpl`: æœ¬ç•ªå®Ÿè£…ï¼ˆflutter_blue_plusä½¿ç”¨ï¼‰
- `MockBleProximityScanner`: ãƒ¢ãƒƒã‚¯å®Ÿè£…

---

### 5.4 FirestoreDMServiceï¼ˆDMã‚µãƒ¼ãƒ“ã‚¹ï¼‰

ãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ç®¡ç†ã™ã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã§ã™ã€‚

**ä¸»ãªæ©Ÿèƒ½**:
- ä¼šè©±ã®ä½œæˆãƒ»å–å¾—
- ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®é€å—ä¿¡
- æœªèª­ã‚«ã‚¦ãƒ³ãƒˆã®ç®¡ç†
- ãƒ”ãƒ³ç•™ã‚ãƒ»ãƒŸãƒ¥ãƒ¼ãƒˆæ©Ÿèƒ½

---

## 6. çŠ¶æ…‹ç®¡ç†ï¼ˆState Managementï¼‰

### 6.1 EncounterManager

ã™ã‚Œã¡ãŒã„ã®çŠ¶æ…‹ã‚’ç®¡ç†ã™ã‚‹Providerã§ã™ã€‚

**ä¸»ãªæ©Ÿèƒ½**:
- ã™ã‚Œã¡ãŒã„æ¤œå‡ºã®é–‹å§‹ãƒ»åœæ­¢
- è¿‘æ¥ãƒã‚¤ãƒ–ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆã™ã‚Œã¡ãŒã„æ™‚ã«æŒ¯å‹•ï¼‰
- ãƒãƒƒã‚·ãƒ¥ã‚¿ã‚°ãƒãƒƒãƒãƒ³ã‚°ï¼ˆå…±é€šã®ãƒãƒƒã‚·ãƒ¥ã‚¿ã‚°ãŒã‚ã‚‹å ´åˆã®é€šçŸ¥ï¼‰
- ã™ã‚Œã¡ãŒã„ãƒªã‚¹ãƒˆã®ç®¡ç†
- ã„ã„ã­ãƒ»ãƒ•ã‚©ãƒ­ãƒ¼ã®æ“ä½œ

**çŠ¶æ…‹**:
```dart
List<Encounter> encounters       // ã™ã‚Œã¡ãŒã„ãƒªã‚¹ãƒˆ
Encounter? latest               // æœ€æ–°ã®ã™ã‚Œã¡ãŒã„
Map<String, int> resonanceCount // å…±é³´ã‚«ã‚¦ãƒ³ãƒˆï¼ˆãƒãƒƒã‚·ãƒ¥ã‚¿ã‚°ãƒãƒƒãƒå›æ•°ï¼‰
Map<String, int> reunionCount   // å†ä¼šã‚«ã‚¦ãƒ³ãƒˆ
```

---

### 6.2 TimelineManager

ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ã®çŠ¶æ…‹ã‚’ç®¡ç†ã™ã‚‹Providerã§ã™ã€‚

**ä¸»ãªæ©Ÿèƒ½**:
- æŠ•ç¨¿ã®ä½œæˆãƒ»å‰Šé™¤
- ãƒªãƒ—ãƒ©ã‚¤ã®è¿½åŠ ãƒ»å‰Šé™¤
- ã„ã„ã­ã®åˆ‡ã‚Šæ›¿ãˆ
- ç”»åƒã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ï¼ˆFirebase Storageï¼‰
- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°ï¼ˆFirestoreã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆï¼‰

**çŠ¶æ…‹**:
```dart
List<TimelinePost> posts        // æŠ•ç¨¿ãƒªã‚¹ãƒˆ
bool loading                    // ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°çŠ¶æ…‹
```

---

### 6.3 NotificationManager

é€šçŸ¥ã®çŠ¶æ…‹ã‚’ç®¡ç†ã™ã‚‹Providerã§ã™ã€‚

**ä¸»ãªæ©Ÿèƒ½**:
- é€šçŸ¥ã®å–å¾—ãƒ»æ›´æ–°
- æœªèª­ã‚«ã‚¦ãƒ³ãƒˆã®ç®¡ç†
- é€šçŸ¥ã®ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°

**çŠ¶æ…‹**:
```dart
List<AppNotification> notifications  // é€šçŸ¥ãƒªã‚¹ãƒˆ
int unreadCount                      // æœªèª­æ•°
```

---

### 6.4 EmotionMapManager

ã‚¨ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³ãƒãƒƒãƒ—ã®çŠ¶æ…‹ã‚’ç®¡ç†ã™ã‚‹Providerã§ã™ã€‚

**ä¸»ãªæ©Ÿèƒ½**:
- æ„Ÿæƒ…æŠ•ç¨¿ã®ä½œæˆ
- è¿‘ãã®æ„Ÿæƒ…æŠ•ç¨¿ã®å–å¾—
- åœ°å›³ä¸Šã§ã®è¡¨ç¤º

---

### 6.5 ProfileController

ãƒ­ãƒ¼ã‚«ãƒ«ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã‚’ç®¡ç†ã™ã‚‹Providerã§ã™ã€‚

**ä¸»ãªæ©Ÿèƒ½**:
- ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã®èª­ã¿è¾¼ã¿
- ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã®æ›´æ–°
- èªè¨¼çŠ¶æ…‹ã®ç®¡ç†

---

## 7. Cloud Functions

### deleteUserProfile

ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã¨ãã®é–¢é€£ãƒ‡ãƒ¼ã‚¿ã‚’å‰Šé™¤ã™ã‚‹Callableé–¢æ•°ã§ã™ã€‚

```javascript
exports.deleteUserProfile = functions.https.onCall(async (data, context) => {
  // èªè¨¼ãƒã‚§ãƒƒã‚¯
  // ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«æ‰€æœ‰æ¨©ã®æ¤œè¨¼
  // é–¢é€£ãƒ‡ãƒ¼ã‚¿ã®å‰Šé™¤:
  //   - ãƒ•ã‚©ãƒ­ãƒ¯ãƒ¼/ãƒ•ã‚©ãƒ­ãƒ¼ä¸­ã®å‚ç…§
  //   - ã„ã„ã­ã®å‚ç…§
  //   - streetpass_presences
  //   - notifications
  //   - usernamesã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã®äºˆç´„
  //   - ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæœ¬ä½“
  //   - Firebase Authenticationã®ãƒ¦ãƒ¼ã‚¶ãƒ¼
});
```

**å‰Šé™¤ã•ã‚Œã‚‹ãƒ‡ãƒ¼ã‚¿**:
1. ä»–ã®ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã®`followers`ã¨`likes`ã‚µãƒ–ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã‹ã‚‰ã€ã“ã®ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«IDã®å‚ç…§
2. ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã®`followers`ã€`following`ã€`likes`ã‚µãƒ–ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³
3. `streetpass_presences`å†…ã®é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
4. `notifications`å†…ã®é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
5. `usernames`ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³å†…ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼åäºˆç´„
6. ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
7. Firebase Authenticationã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ

---

## 8. Firestoreã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³æ§‹é€ 

### profilesï¼ˆãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ï¼‰
```
profiles/{profileId}
â”œâ”€â”€ followers/{followerId}     # ãƒ•ã‚©ãƒ­ãƒ¯ãƒ¼
â”œâ”€â”€ following/{targetId}       # ãƒ•ã‚©ãƒ­ãƒ¼ä¸­
â”œâ”€â”€ likes/{likerId}            # ã„ã„ã­ã—ãŸäºº
â””â”€â”€ notifications/{notificationId}  # é€šçŸ¥
```

**ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰**:
```json
{
  "id": "device-id",
  "authUid": "firebase-auth-uid",
  "username": "username123",
  "displayName": "è¡¨ç¤ºå",
  "bio": "è‡ªå·±ç´¹ä»‹",
  "homeTown": "å‡ºèº«åœ°",
  "favoriteGames": ["#ãƒãƒƒã‚·ãƒ¥ã‚¿ã‚°1", "#ãƒãƒƒã‚·ãƒ¥ã‚¿ã‚°2"],
  "avatarColor": 4283215696,
  "avatarImageBase64": "base64...",
  "beaconId": "ble-beacon-id",
  "receivedLikes": 5,
  "followersCount": 10,
  "followingCount": 8
}
```

---

### usernamesï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼åäºˆç´„ï¼‰
ãƒ¦ãƒ¼ã‚¶ãƒ¼åã®ä¸€æ„æ€§ã‚’ä¿è¨¼ã™ã‚‹ãŸã‚ã®ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã§ã™ã€‚

```
usernames/{username}  // usernameã¯å°æ–‡å­—ã«æ­£è¦åŒ–
```

**ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰**:
```json
{
  "profileId": "é–¢é€£ã™ã‚‹ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ID"
}
```

---

### timelinePostsï¼ˆã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³æŠ•ç¨¿ï¼‰
```
timelinePosts/{postId}
â””â”€â”€ replies/{replyId}  # è¿”ä¿¡
```

**ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰**:
```json
{
  "id": "post-id",
  "authorId": "profile-id",
  "authorName": "æŠ•ç¨¿è€…å",
  "authorUsername": "username",
  "authorColorValue": 4283215696,
  "caption": "æŠ•ç¨¿å†…å®¹",
  "createdAt": "2025-01-01T12:00:00.000Z",
  "imageBase64": "base64...",
  "imageUrl": "https://...",
  "authorAvatarImageBase64": "base64...",
  "likeCount": 5,
  "replyCount": 3,
  "likedBy": ["user-id-1", "user-id-2"],
  "hashtags": ["#ã‚¿ã‚°1", "#ã‚¿ã‚°2"],
  "parentPostId": null,
  "replyToId": null,
  "replyToAuthorName": null
}
```

---

### streetpass_presencesï¼ˆã™ã‚Œã¡ãŒã„ãƒ—ãƒ¬ã‚¼ãƒ³ã‚¹ï¼‰
ç¾åœ¨ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ä½ç½®æƒ…å ±ã‚’ä¿æŒã—ã¾ã™ã€‚

```
streetpass_presences/{deviceId}
```

**ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰**:
```json
{
  "profile": { /* Profileã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ */ },
  "lat": 35.6762,
  "lng": 139.6503,
  "lastUpdatedMs": 1690000000000,
  "active": true,
  "deviceId": "device-id",
  "beaconId": "ble-beacon-id"
}
```

---

### emotion_map_postsï¼ˆã‚¨ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³ãƒãƒƒãƒ—æŠ•ç¨¿ï¼‰
```
emotion_map_posts/{postId}
```

**ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰**:
```json
{
  "id": "post-id",
  "emotion": "happy",
  "latitude": 35.6762,
  "longitude": 139.6503,
  "createdAt": "2025-01-01T12:00:00.000Z",
  "message": "ä»Šæ—¥ã¯ã„ã„å¤©æ°—ï¼",
  "profileId": "profile-id"
}
```

---

### conversationsï¼ˆä¼šè©±ï¼‰
```
conversations/{conversationId}
â””â”€â”€ messages/{messageId}  # ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
```

**Conversationãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰**:
```json
{
  "participantIds": ["user-id-1", "user-id-2"],
  "lastMessage": "æœ€æ–°ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸",
  "lastMessageAt": "2025-01-01T12:00:00.000Z",
  "unreadCounts": {"user-id-1": 0, "user-id-2": 2},
  "pinnedBy": {"user-id-1": true},
  "mutedBy": {}
}
```

**Messageãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰**:
```json
{
  "id": "message-id",
  "senderId": "sender-profile-id",
  "content": "ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å†…å®¹",
  "createdAt": "2025-01-01T12:00:00.000Z",
  "imageBase64": null
}
```

---

## 9. Firestoreã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ«ãƒ¼ãƒ«

### èªè¨¼ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°
```
signedIn()        // ãƒ­ã‚°ã‚¤ãƒ³æ¸ˆã¿ã‹
authUid()         // èªè¨¼UIDå–å¾—
ownsProfile(id)   // ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã®æ‰€æœ‰è€…ã‹
```

### ãƒ«ãƒ¼ãƒ«ã®æ¦‚è¦
- **profiles**: ãƒ­ã‚°ã‚¤ãƒ³ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯èª­ã¿å–ã‚Šå¯èƒ½ã€ä½œæˆæ™‚ã¯authUidãŒä¸€è‡´å¿…é ˆã€æ›´æ–°ã¯æ‰€æœ‰è€…ã¾ãŸã¯ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã®ã¿å¤‰æ›´
- **usernames**: ãƒ­ã‚°ã‚¤ãƒ³ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯èª­ã¿å–ã‚Šå¯èƒ½ã€ä½œæˆ/å‰Šé™¤ã¯æ‰€æœ‰è€…ã®ã¿
- **timelinePosts**: ãƒ­ã‚°ã‚¤ãƒ³ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯èª­ã¿å–ã‚Šå¯èƒ½ã€ä½œæˆ/å‰Šé™¤ã¯æŠ•ç¨¿è€…ã®ã¿
- **streetpass_presences**: ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«æ‰€æœ‰è€…ã®ã¿æ›¸ãè¾¼ã¿å¯èƒ½
- **conversations/messages**: ãƒ­ã‚°ã‚¤ãƒ³ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯èª­ã¿æ›¸ãå¯èƒ½ï¼ˆã‚¢ãƒ—ãƒªãƒ¬ãƒ™ãƒ«ã§ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£åˆ¶å¾¡ï¼‰

---

## 10. ç”»é¢æ§‹æˆ

### 10.1 ãƒ¡ã‚¤ãƒ³ç”»é¢ï¼ˆHomeShellï¼‰
ã‚¿ãƒ–ãƒ™ãƒ¼ã‚¹ã®ãƒ¡ã‚¤ãƒ³ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã§ã™ã€‚

**ã‚¿ãƒ–**:
1. **ã™ã‚Œã¡ãŒã„**: ã™ã‚Œã¡ãŒã£ãŸãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ä¸€è¦§
2. **ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³**: æŠ•ç¨¿ãƒ•ã‚£ãƒ¼ãƒ‰
3. **ãƒãƒƒãƒ—**: ã‚¨ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³ãƒãƒƒãƒ—

**è¿½åŠ æ©Ÿèƒ½**:
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¢ã‚¤ã‚³ãƒ³ã‹ã‚‰ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç”»é¢ã¸
- é€šçŸ¥ãƒ™ãƒ«ï¼ˆæœªèª­ãƒãƒƒã‚¸ä»˜ãï¼‰
- ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚¢ã‚¤ã‚³ãƒ³ï¼ˆDMï¼‰

---

### 10.2 ã™ã‚Œã¡ãŒã„é–¢é€£ç”»é¢

**EncounterListScreen**: ã™ã‚Œã¡ãŒã„ä¸€è¦§
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚«ãƒ¼ãƒ‰è¡¨ç¤º
- ã„ã„ã­ãƒœã‚¿ãƒ³
- è©³ç´°ç”»é¢ã¸ã®é·ç§»

**EncounterDetailScreen**: ã™ã‚Œã¡ãŒã„è©³ç´°
- ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«æƒ…å ±
- è·é›¢æƒ…å ±
- ã„ã„ã­/ãƒ•ã‚©ãƒ­ãƒ¼ãƒœã‚¿ãƒ³

---

### 10.3 ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«é–¢é€£ç”»é¢

**ProfileViewScreen**: ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«è©³ç´°è¡¨ç¤º
- ã‚¢ãƒã‚¿ãƒ¼ã€è¡¨ç¤ºåã€ãƒ¦ãƒ¼ã‚¶ãƒ¼å
- è‡ªå·±ç´¹ä»‹ã€å‡ºèº«åœ°
- ãƒãƒƒã‚·ãƒ¥ã‚¿ã‚°
- ãƒ•ã‚©ãƒ­ãƒ¯ãƒ¼/ãƒ•ã‚©ãƒ­ãƒ¼ä¸­/ã„ã„ã­æ•°
- ã„ã„ã­/ãƒ•ã‚©ãƒ­ãƒ¼ãƒœã‚¿ãƒ³
- DMé€ä¿¡ãƒœã‚¿ãƒ³

**ProfileEditScreen**: ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç·¨é›†
- è¡¨ç¤ºåã€ãƒ¦ãƒ¼ã‚¶ãƒ¼åã€è‡ªå·±ç´¹ä»‹ç·¨é›†
- ã‚¢ãƒã‚¿ãƒ¼ç”»åƒå¤‰æ›´
- ãƒãƒƒã‚·ãƒ¥ã‚¿ã‚°ç·¨é›†

---

### 10.4 ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³é–¢é€£ç”»é¢

**PostDetailScreen**: æŠ•ç¨¿è©³ç´°
- æŠ•ç¨¿å†…å®¹è¡¨ç¤º
- ã„ã„ã­ãƒœã‚¿ãƒ³
- è¿”ä¿¡ä¸€è¦§
- è¿”ä¿¡æŠ•ç¨¿æ©Ÿèƒ½

---

### 10.5 DMé–¢é€£ç”»é¢

**ConversationListScreen**: ä¼šè©±ä¸€è¦§
- ä¼šè©±ãƒªã‚¹ãƒˆ
- æœªèª­ãƒãƒƒã‚¸
- ãƒ”ãƒ³ç•™ã‚è¡¨ç¤º

**ChatScreen**: ãƒãƒ£ãƒƒãƒˆç”»é¢
- ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ä¸€è¦§
- ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡
- ç”»åƒé€ä¿¡

---

### 10.6 ãã®ä»–ã®ç”»é¢

**NotificationsScreen**: é€šçŸ¥ä¸€è¦§
**SettingsScreen**: è¨­å®šï¼ˆãƒ­ã‚°ã‚¢ã‚¦ãƒˆã€ã‚¢ã‚«ã‚¦ãƒ³ãƒˆå‰Šé™¤ï¼‰
**WelcomeScreen**: ã‚¦ã‚§ãƒ«ã‚«ãƒ ç”»é¢
**RegisterAccountScreen**: ã‚¢ã‚«ã‚¦ãƒ³ãƒˆç™»éŒ²

---

## 11. èªè¨¼ãƒ•ãƒ­ãƒ¼

### 11.1 åŒ¿åèªè¨¼
åˆå›èµ·å‹•æ™‚ã¯åŒ¿åèªè¨¼ã§ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½œæˆã—ã¾ã™ã€‚

### 11.2 Googleèªè¨¼
Google Sign-Inã«ã‚ˆã‚‹èªè¨¼ãŒå¯èƒ½ã§ã™ã€‚
åŒ¿åã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‹ã‚‰ã®ç§»è¡Œã«ã‚‚å¯¾å¿œã—ã¦ã„ã¾ã™ã€‚

### 11.3 ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«è¨­å®š
- **è¡¨ç¤ºå**: å¿…é ˆ
- **ãƒ¦ãƒ¼ã‚¶ãƒ¼åï¼ˆ@usernameï¼‰**: å¿…é ˆã€ä¸€æ„ã§ã‚ã‚‹å¿…è¦ã‚ã‚Š
- **è‡ªå·±ç´¹ä»‹**: ä»»æ„
- **å‡ºèº«åœ°**: ä»»æ„
- **ãƒãƒƒã‚·ãƒ¥ã‚¿ã‚°**: ä»»æ„ï¼ˆæœ€å¤§10å€‹ï¼‰
- **ã‚¢ãƒã‚¿ãƒ¼**: è‰²é¸æŠã¾ãŸã¯ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰

---

## 12. ã™ã‚Œã¡ãŒã„æ¤œå‡ºã®ä»•çµ„ã¿

### ãƒ—ãƒ­ã‚»ã‚¹
1. ã‚¢ãƒ—ãƒªèµ·å‹•æ™‚ã«GPSä½ç½®æƒ…å ±ã‚’å–å¾—
2. è‡ªåˆ†ã®ä½ç½®ã‚’`streetpass_presences`ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã«æ›¸ãè¾¼ã¿
3. å®šæœŸçš„ã«è¿‘ãã®`streetpass_presences`ã‚’ã‚¯ã‚¨ãƒª
4. GPSè·é›¢ãŒé–¾å€¤å†…ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’æ¤œå‡º
5. BLEãƒ“ãƒ¼ã‚³ãƒ³ã«ã‚ˆã‚‹è¿‘æ¥ç¢ºèªï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
6. ãƒãƒƒã‚·ãƒ¥ã‚¿ã‚°ãƒãƒƒãƒãƒ³ã‚°ã‚’ãƒã‚§ãƒƒã‚¯
7. ãƒã‚¤ãƒ–ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³é€šçŸ¥ï¼ˆè¿‘æ¥æ™‚ï¼‰
8. ã™ã‚Œã¡ãŒã„ãƒªã‚¹ãƒˆã«è¿½åŠ 

### è·é›¢è¨ˆç®—
- **GPS**: Geolocatorãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«ã‚ˆã‚‹æ¸¬åœ°è·é›¢è¨ˆç®—
- **BLE**: RSSIã‹ã‚‰æ¨å®šè·é›¢ã‚’è¨ˆç®—

### ãƒãƒƒã‚·ãƒ¥ã‚¿ã‚°ãƒãƒƒãƒãƒ³ã‚°
- ä¸¡è€…ã®ãŠæ°—ã«å…¥ã‚Šãƒãƒƒã‚·ãƒ¥ã‚¿ã‚°ã‚’æ¯”è¼ƒ
- å…±é€šã®ãƒãƒƒã‚·ãƒ¥ã‚¿ã‚°ãŒã‚ã‚Œã°ã€Œå…±é³´ã€ã¨ã—ã¦è¨˜éŒ²
- ç‰¹åˆ¥ãªãƒã‚¤ãƒ–ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³ã§é€šçŸ¥

---

## 13. ãƒ¢ãƒƒã‚¯ãƒ¢ãƒ¼ãƒ‰

Firebaseã«æ¥ç¶šã§ããªã„ç’°å¢ƒã‚„é–‹ç™ºæ™‚ã®ãŸã‚ã«ã€ãƒ¢ãƒƒã‚¯ãƒ¢ãƒ¼ãƒ‰ã‚’ç”¨æ„ã—ã¦ã„ã¾ã™ã€‚

**ãƒ¢ãƒƒã‚¯å®Ÿè£…**:
- `MockStreetPassService`: ãƒ€ãƒŸãƒ¼ã®ã™ã‚Œã¡ãŒã„ãƒ‡ãƒ¼ã‚¿ã‚’ç”Ÿæˆ
- `MockProfileInteractionService`: ãƒ¡ãƒ¢ãƒªå†…ã§ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«æ“ä½œã‚’æ¨¡æ“¬
- `MockBleProximityScanner`: ãƒ€ãƒŸãƒ¼ã®BLEãƒ’ãƒƒãƒˆã‚’ç”Ÿæˆ

**ä½¿ç”¨ã‚±ãƒ¼ã‚¹**:
- Firebaseæ¥ç¶šã‚¨ãƒ©ãƒ¼æ™‚ã®è‡ªå‹•åˆ‡ã‚Šæ›¿ãˆ
- UIã®é–‹ç™ºãƒ»ãƒ†ã‚¹ãƒˆ
- ãƒ‡ãƒ¢ç’°å¢ƒ

---

## 14. å¿…è¦ãªæ¨©é™

### Android
```xml
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.BLUETOOTH_SCAN" />
<uses-permission android:name="android.permission.BLUETOOTH_CONNECT" />
<uses-permission android:name="android.permission.BLUETOOTH_ADVERTISE" />
```

### iOS
- `NSLocationWhenInUseUsageDescription`: ä½ç½®æƒ…å ±ä½¿ç”¨è¨±å¯
- `NSBluetoothAlwaysUsageDescription`: Bluetoothä½¿ç”¨è¨±å¯
- `NSBluetoothPeripheralUsageDescription`: Bluetoothãƒšãƒªãƒ•ã‚§ãƒ©ãƒ«ä½¿ç”¨è¨±å¯
- `NSPhotoLibraryUsageDescription`: å†™çœŸãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚¢ã‚¯ã‚»ã‚¹è¨±å¯

---

## 15. ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †

### é–‹ç™ºç’°å¢ƒ
1. Flutter 3.x ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
2. ãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚¯ãƒ­ãƒ¼ãƒ³
3. `flutter pub get` ã§ä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
4. Firebaseãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆ
5. FlutterFireã§è¨­å®šã‚’ç”Ÿæˆ: `flutterfire configure`
6. `flutter run` ã§èµ·å‹•

### Firebaseè¨­å®š
1. Cloud Firestore ã‚’æœ‰åŠ¹åŒ–
2. Firebase Authentication ã‚’æœ‰åŠ¹åŒ–ï¼ˆåŒ¿åèªè¨¼ã€Googleèªè¨¼ï¼‰
3. Firebase Storage ã‚’æœ‰åŠ¹åŒ–
4. Cloud Functions ã‚’ãƒ‡ãƒ—ãƒ­ã‚¤

---

## 16. ä»Šå¾Œã®äºˆå®šï¼ˆTODOï¼‰

- ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æ©Ÿèƒ½ã®æ‹¡å……
- ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥
- ãƒãƒƒãƒ†ãƒªãƒ¼æœ€é©åŒ–
- ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼æ©Ÿèƒ½ï¼ˆé€æ˜ãƒ¢ãƒ¼ãƒ‰ã€ãƒ–ãƒ­ãƒƒã‚¯ï¼‰

---

## 17. ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

æ•™è‚²ãƒ»ãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ—ç›®çš„

---

## ä»˜éŒ²A: ã‚ˆãã‚ã‚‹è³ªå•ï¼ˆFAQï¼‰

### Q: ã™ã‚Œã¡ãŒã„æ¤œå‡ºã®ç²¾åº¦ã¯ã©ã®ãã‚‰ã„ã§ã™ã‹ï¼Ÿ
A: GPSã®ã¿ã®å ´åˆã¯æ•°åãƒ¡ãƒ¼ãƒˆãƒ«ã®èª¤å·®ãŒã‚ã‚Šã¾ã™ã€‚BLEã‚’ä½µç”¨ã™ã‚‹ã¨æ•°ãƒ¡ãƒ¼ãƒˆãƒ«ç¨‹åº¦ã®ç²¾åº¦ã«ãªã‚Šã¾ã™ã€‚

### Q: ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ã§ã‚‚ä½¿ãˆã¾ã™ã‹ï¼Ÿ
A: ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ™‚ã¯ãƒ¢ãƒƒã‚¯ãƒ¢ãƒ¼ãƒ‰ã§å‹•ä½œã—ã¾ã™ãŒã€ä»–ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨ã®å®Ÿéš›ã®ã™ã‚Œã¡ãŒã„ã¯è¨˜éŒ²ã•ã‚Œã¾ã›ã‚“ã€‚

### Q: ãƒ¦ãƒ¼ã‚¶ãƒ¼åã¯å¤‰æ›´ã§ãã¾ã™ã‹ï¼Ÿ
A: ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç·¨é›†ç”»é¢ã‹ã‚‰å¤‰æ›´å¯èƒ½ã§ã™ã€‚ãŸã ã—ã€ä»–ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒä½¿ç”¨ã—ã¦ã„ãªã„ä¸€æ„ã®åå‰ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

### Q: ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’å‰Šé™¤ã™ã‚‹ã¨ã©ã†ãªã‚Šã¾ã™ã‹ï¼Ÿ
A: è¨­å®šç”»é¢ã‹ã‚‰ã‚¢ã‚«ã‚¦ãƒ³ãƒˆå‰Šé™¤ãŒå¯èƒ½ã§ã™ã€‚ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã€æŠ•ç¨¿ã€ãƒ•ã‚©ãƒ­ãƒ¼é–¢ä¿‚ãªã©ã™ã¹ã¦ã®ãƒ‡ãƒ¼ã‚¿ãŒFirestoreã‹ã‚‰å‰Šé™¤ã•ã‚Œã¾ã™ã€‚

### Q: ä½ç½®æƒ…å ±ã¯ã©ã®ã‚ˆã†ã«ä½¿ã‚ã‚Œã¾ã™ã‹ï¼Ÿ
A: ä½ç½®æƒ…å ±ã¯ã™ã‚Œã¡ãŒã„æ¤œå‡ºã®ã¿ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚`streetpass_presences`ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã«ä¸€æ™‚çš„ã«ä¿å­˜ã•ã‚Œã€ä»–ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨ã®è·é›¢è¨ˆç®—ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚

---

## ä»˜éŒ²B: ç”¨èªé›†

| ç”¨èª | èª¬æ˜ |
|------|------|
| ã™ã‚Œã¡ãŒã„ | è¿‘ãã«ã„ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’æ¤œå‡ºã™ã‚‹ã‚¤ãƒ™ãƒ³ãƒˆ |
| ãƒ“ãƒ¼ã‚³ãƒ³ID | BLEã§è‡ªåˆ†ã‚’è­˜åˆ¥ã™ã‚‹ãŸã‚ã®ID |
| ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ID | ãƒ‡ãƒã‚¤ã‚¹IDã‚’ãƒ™ãƒ¼ã‚¹ã«ã—ãŸãƒ¦ãƒ¼ã‚¶ãƒ¼è­˜åˆ¥å­ |
| ãƒãƒƒã‚·ãƒ¥ã‚¿ã‚° | ãŠæ°—ã«å…¥ã‚Šã®ã‚²ãƒ¼ãƒ ã‚„è¶£å‘³ã‚’è¡¨ã™ã‚¿ã‚° |
| å…±é³´ | å…±é€šã®ãƒãƒƒã‚·ãƒ¥ã‚¿ã‚°ã‚’æŒã¤ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨ã®ã™ã‚Œã¡ãŒã„ |
| å†ä¼š | ä»¥å‰ã™ã‚Œã¡ãŒã£ãŸãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨ã®å†åº¦ã®ã™ã‚Œã¡ãŒã„ |
| ã‚¨ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³ãƒãƒƒãƒ— | æ„Ÿæƒ…ã‚’åœ°å›³ä¸Šã«æŠ•ç¨¿ã™ã‚‹æ©Ÿèƒ½ |
| ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ | æŠ•ç¨¿ãƒ•ã‚£ãƒ¼ãƒ‰ |
| DM | ãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ |

---

ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯Vib SNSã‚¢ãƒ—ãƒªã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ 0.1.0 ã«åŸºã¥ã„ã¦ã„ã¾ã™ã€‚
æœ€çµ‚æ›´æ–°: 2026å¹´1æœˆ1æ—¥
